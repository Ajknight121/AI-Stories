import express from 'express'
import cors from "cors";
import dotenv from "dotenv"

dotenv.config({path: ".env.local"})

const app = express()
const port = process.env.PORT
const key = process.env.FREEPIKS_API_KEY
app.use(cors())
app.use(express.json());

const aiPath = "https://api.freepik.com/v1/ai/text-to-image"
const headers = {
    Accept: "application/json",
    "X-Freepik-API-Key": key,
    "Content-Type": "application/json",
};

let body = {
  prompt: "Mountain landscape in autumn",
  negative_prompt: "",
  num_inference_steps: 8,
  guidance_scale: 2,
  num_images: 1,
  image: {
    size: "standard",
  },
  styling: {
    style: "photo",
  }
}

let aiImg = ""

async function makeRequest( userPrompt ) {
  try {
    body.prompt = userPrompt
      const response = await fetch(aiPath, {
          method: "POST",
          headers: headers,
          body: JSON.stringify(body),
      });
      
      if (!response.ok) {
          throw new Error(`Non-200 response: ${await response.text()}`);
      }
      
      const responseJSON = await response.json();
      aiImg = responseJSON.data.map((img) => {
        return "data:image/jpeg;base64," + img.base64
      })
    return aiImg
      
  } catch (error) {
      console.error(error);
  }
}


app.get("/api/book", (req, res) => {
  console.log("updating client")
  res.json({"pages": [
    {
      name: "Example cat one",
      position: 1,
      prompt: "a business cat",
      image: "data:image/jpeg;base64,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"
    },
    {
      name: "Two ducks",
      position: 1,
      prompt: "two ducks eat a piece of bread",
      image: ""
    },
    {
      name: "3 dolla bill",
      position: 1,
      prompt: "A US doller bill with a value of $3",
      image: ""
    },
  ]})
})

app.post("/api/ai", async (req, res) => {
  try {
    const { prompt } = req.body
    console.log("Recieved Prompt: ", prompt)
    const images = await makeRequest(prompt)
  
    if (!images) {
      return res.status(401).json({ error: "Failed to get ai image" })
    }
  
    res.json({images: images})
  } catch (error) {
    console.error(error);
    console.log(req)
    res.status(400).json({ error: "Failed to get ai image" });
  }
})

app.listen(port, () => {console.log("server started on port ", port)})